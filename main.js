(()=>{"use strict";var __webpack_modules__={950:(__unused_webpack_module,exports,__webpack_require__)=>{var _a,_b,_c;Object.defineProperty(exports,"__esModule",{value:!0}),exports.AppAuthController=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(6481),jwt_sign_service_1=__webpack_require__(5207),app_auth_schema_1=__webpack_require__(9849),app_auth_service_1=__webpack_require__(6322);let AppAuthController=class AppAuthController{constructor(appAuthService,jwtSignService){this.appAuthService=appAuthService,this.jwtSignService=jwtSignService}signup(headers){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const member=yield this.appAuthService.validateMemberToken(headers.authorization);return{token:yield this.jwtSignService.signMemberToken(member)}}))}};tslib_1.__decorate([(0,common_1.Post)("/member"),tslib_1.__param(0,(0,common_1.Headers)()),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",["function"==typeof(_c=void 0!==app_auth_schema_1.PostMemberHeadersDto&&app_auth_schema_1.PostMemberHeadersDto)?_c:Object]),tslib_1.__metadata("design:returntype",Promise)],AppAuthController.prototype,"signup",null),AppAuthController=tslib_1.__decorate([(0,common_1.Controller)("app-auth"),tslib_1.__metadata("design:paramtypes",["function"==typeof(_a=void 0!==app_auth_service_1.AppAuthService&&app_auth_service_1.AppAuthService)?_a:Object,"function"==typeof(_b=void 0!==jwt_sign_service_1.JwtSignService&&jwt_sign_service_1.JwtSignService)?_b:Object])],AppAuthController),exports.AppAuthController=AppAuthController},18:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMemberMutation=exports.getAppByIdQuery=exports.appAuthMemberFragment=void 0;const gql_1=__webpack_require__(609);exports.appAuthMemberFragment=(0,gql_1.gql)("\n  fragment AppAuthMember on member {\n    id\n    appId\n  }\n"),exports.getAppByIdQuery=(0,gql_1.gql)("\n  query AppAuthServiceGetAppById($appId: uuid!, $externalMemberId: String!) {\n    app: app_by_pk(id: $appId) {\n      id\n      jwtSecrets\n    }\n\n    member(\n      where: { appId: { _eq: $appId }, externalId: { _eq: $externalMemberId } }\n    ) {\n      ...AppAuthMember\n    }\n  }\n"),exports.createMemberMutation=(0,gql_1.gql)("\n  mutation CreateMember($data: member_insert_input!) {\n    member: insert_member_one(\n      object: $data\n      on_conflict: {\n        constraint: member_app_id_external_id_key\n        update_columns: [name]\n      }\n    ) {\n      ...AppAuthMember\n    }\n  }\n")},6099:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.AppAuthModule=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(6481),app_auth_service_1=__webpack_require__(6322),app_auth_controller_1=__webpack_require__(950),jwt_sign_service_1=__webpack_require__(5207),passport_1=__webpack_require__(4340),jwt_module_1=__webpack_require__(4657);let AppAuthModule=class AppAuthModule{};AppAuthModule=tslib_1.__decorate([(0,common_1.Module)({imports:[passport_1.PassportModule,jwt_module_1.JwtModule],providers:[app_auth_service_1.AppAuthService,jwt_sign_service_1.JwtSignService],controllers:[app_auth_controller_1.AppAuthController]})],AppAuthModule),exports.AppAuthModule=AppAuthModule},9849:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PostMemberHeadersDto=exports.memberTokenPayloadSchema=exports.jwtSecretTypeKeySchema=void 0;const z=__webpack_require__(8316),zod_nestjs_1=__webpack_require__(3825),zod_1=__webpack_require__(1823),claimKey="https://chat.app/jwt/claim";exports.jwtSecretTypeKeySchema=z.array(z.object({algorithm:z.enum(["RS256"]),issuer:z.string(),audience:z.string().optional(),key:z.string()})),exports.memberTokenPayloadSchema=z.object({iss:z.string(),[claimKey]:z.object({"app-id":z.string(),"user-id":z.string(),user:z.object({name:z.string()}).optional()})}).transform((payload=>({claim:{externalMemberId:payload[claimKey]["user-id"],externalMember:payload[claimKey].user,appId:payload[claimKey]["app-id"]},issuer:payload.iss})));const postMemberHeadersSchema=z.object({authorization:zod_1.jwtTokenSchema.bearer});class PostMemberHeadersDto extends((0,zod_nestjs_1.createZodDto)(postMemberHeadersSchema)){}exports.PostMemberHeadersDto=PostMemberHeadersDto},6322:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.AppAuthService=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(6481),graphql_request_1=__webpack_require__(6408),app_auth_schema_1=__webpack_require__(9849),jwt=__webpack_require__(9344),app_auth_gql_1=__webpack_require__(18),gql_1=__webpack_require__(609);let AppAuthService=class AppAuthService{safeJwtVerify(...params){try{return jwt.verify(...params),{success:!0}}catch(error){return{success:!1,error}}}validateMemberToken(rawToken){var _a;return tslib_1.__awaiter(this,void 0,void 0,(function*(){const token=rawToken.replace("Bearer ",""),parsedPayload=app_auth_schema_1.memberTokenPayloadSchema.safeParse(jwt.decode(token));if(!parsedPayload.success)throw new Error("Invalid token");const payload=parsedPayload.data,{claim}=payload,data=yield graphql_request_1.default.request(app_auth_gql_1.getAppByIdQuery,{appId:claim.appId,externalMemberId:claim.externalMemberId}),{app}=data;let member=null===(_a=data.member)||void 0===_a?void 0:_a[0];if(!app)throw new Error("App doesn't exists");if(!app.jwtSecrets)throw new Error("Invalid secrets");const parsedJwtSecrets=app_auth_schema_1.jwtSecretTypeKeySchema.safeParse(app.jwtSecrets);if(!parsedJwtSecrets.success)throw new Error("Invalid secrets");const jwtSecret=parsedJwtSecrets.data.find((secret=>secret.issuer===payload.issuer));if(!jwtSecret)throw new Error("Issuer secret doesn't exists");if(!this.safeJwtVerify(token,jwtSecret.key,{algorithms:[jwtSecret.algorithm],issuer:jwtSecret.issuer,audience:jwtSecret.audience}).success)throw new Error("Invalid JWT");if(!member){if(!claim.externalMember)throw new Error("Member doesn't exists");const newMember=(yield graphql_request_1.default.request(app_auth_gql_1.createMemberMutation,{data:{appId:claim.appId,name:claim.externalMember.name,externalId:claim.externalMemberId}})).member;if(!newMember)throw new Error("Member couldn't created");member=newMember}return(0,gql_1.useFragment)(app_auth_gql_1.appAuthMemberFragment,member)}))}};AppAuthService=tslib_1.__decorate([(0,common_1.Injectable)()],AppAuthService),exports.AppAuthService=AppAuthService},7507:(__unused_webpack_module,exports,__webpack_require__)=>{var _a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.AppController=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(6481),graphql_request_1=__webpack_require__(6408),app_service_1=__webpack_require__(7350);let AppController=class AppController{constructor(appService){this.appService=appService}getData(){return graphql_request_1.default.request('\n    mutation A {\n      insert_app_one(object:{name:"Deneme"}){\n        id\n      }\n    } \n    '),{message:"Hello World"}}};tslib_1.__decorate([(0,common_1.Get)(),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[]),tslib_1.__metadata("design:returntype",void 0)],AppController.prototype,"getData",null),AppController=tslib_1.__decorate([(0,common_1.Controller)(),tslib_1.__metadata("design:paramtypes",["function"==typeof(_a=void 0!==app_service_1.AppService&&app_service_1.AppService)?_a:Object])],AppController),exports.AppController=AppController},341:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.AppModule=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(6481),nestjs_hasura_1=__webpack_require__(1330),path=__webpack_require__(1017),app_controller_1=__webpack_require__(7507),app_service_1=__webpack_require__(7350),auth_module_1=__webpack_require__(2940),app_auth_module_1=__webpack_require__(6099),environment_1=__webpack_require__(6567),constants_1=__webpack_require__(1306),hasura_events_module_1=__webpack_require__(6509),hasura_actions_module_1=__webpack_require__(6897),apollo_1=__webpack_require__(9096),graphql_1=__webpack_require__(1161);let AppModule=class AppModule{};AppModule=tslib_1.__decorate([(0,common_1.Module)({imports:[auth_module_1.AuthModule,app_auth_module_1.AppAuthModule,nestjs_hasura_1.HasuraModule.forRoot(nestjs_hasura_1.HasuraModule,{webhookConfig:{secretFactory:environment_1.environment.hasura.webhookSecretFactory,secretHeader:constants_1.CONSTANTS.HASURA_MANAGER_WEBHOOK_SECRET_HEADER_VALUE.toLowerCase()},managedMetaDataConfig:environment_1.environment.production?void 0:{metadataVersion:"v3",dirPath:path.join(process.cwd(),"apps/hasura/metadata"),secretHeaderEnvName:constants_1.CONSTANTS.HASURA_MANAGER_WEBHOOK_SECRET_HEADER_VALUE,nestEndpointEnvName:"MANAGER_EVENT_WEBHOOK_ENDPOINT",defaultEventRetryConfig:{intervalInSeconds:15,numRetries:3,timeoutInSeconds:100,toleranceSeconds:21600}}}),hasura_events_module_1.HasuraEventsModule,graphql_1.GraphQLModule.forRoot({driver:apollo_1.ApolloDriver,autoSchemaFile:!0,playground:!environment_1.environment.production}),hasura_actions_module_1.HasuraActionsModule],controllers:[app_controller_1.AppController],providers:[app_service_1.AppService]})],AppModule),exports.AppModule=AppModule},7350:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.AppService=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(6481);let AppService=class AppService{};AppService=tslib_1.__decorate([(0,common_1.Injectable)()],AppService),exports.AppService=AppService},6238:(__unused_webpack_module,exports,__webpack_require__)=>{var _a,_b;Object.defineProperty(exports,"__esModule",{value:!0}),exports.AuthController=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(6481),customer_auth_guard_1=__webpack_require__(1864),auth_service_1=__webpack_require__(6841),member_auth_guard_1=__webpack_require__(3817),jwt_sign_service_1=__webpack_require__(5207);let AuthController=class AuthController{constructor(authService,jwtSignService){this.authService=authService,this.jwtSignService=jwtSignService}login(req){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return{token:yield this.jwtSignService.signCustomerToken(req.user)}}))}memberLogin(req){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return{token:yield this.jwtSignService.signMemberToken(req.user)}}))}encryptPassword(body){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return this.authService.encryptPassword(body.password)}))}};tslib_1.__decorate([(0,common_1.UseGuards)(customer_auth_guard_1.CustomerAuthGuard),(0,common_1.Post)("customer/login"),tslib_1.__param(0,(0,common_1.Req)()),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[Object]),tslib_1.__metadata("design:returntype",Promise)],AuthController.prototype,"login",null),tslib_1.__decorate([(0,common_1.UseGuards)(member_auth_guard_1.MemberAuthGuard),(0,common_1.Post)("member/login"),tslib_1.__param(0,(0,common_1.Req)()),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[Object]),tslib_1.__metadata("design:returntype",Promise)],AuthController.prototype,"memberLogin",null),tslib_1.__decorate([(0,common_1.Post)("encrypt-password"),tslib_1.__param(0,(0,common_1.Body)()),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[Object]),tslib_1.__metadata("design:returntype",Promise)],AuthController.prototype,"encryptPassword",null),AuthController=tslib_1.__decorate([(0,common_1.Controller)("auth"),tslib_1.__metadata("design:paramtypes",["function"==typeof(_a=void 0!==auth_service_1.AuthService&&auth_service_1.AuthService)?_a:Object,"function"==typeof(_b=void 0!==jwt_sign_service_1.JwtSignService&&jwt_sign_service_1.JwtSignService)?_b:Object])],AuthController),exports.AuthController=AuthController},4385:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMemberByEmailQuery=exports.getCustomerByEmailQuery=void 0;const gql_1=__webpack_require__(609);exports.getCustomerByEmailQuery=(0,gql_1.gql)("\n  query AuthServiceGetCustomerByEmail($email: String!) {\n    customer(where: { email: { _eq: $email } }) {\n      id\n      encryptedPassword\n      appId\n    }\n  }\n"),exports.getMemberByEmailQuery=(0,gql_1.gql)("\n  query AuthServiceGetMemberByEmail($email: String!) {\n    member(where: { externalId: { _eq: $email } }) {\n      id\n      appId\n      encryptedPassword\n    }\n  }\n")},2940:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.AuthModule=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(6481),auth_service_1=__webpack_require__(6841),auth_controller_1=__webpack_require__(6238),customer_strategy_1=__webpack_require__(2392),member_strategy_1=__webpack_require__(1259),jwt_sign_service_1=__webpack_require__(5207),jwt_module_1=__webpack_require__(4657);let AuthModule=class AuthModule{};AuthModule=tslib_1.__decorate([(0,common_1.Module)({imports:[jwt_module_1.JwtModule],providers:[auth_service_1.AuthService,jwt_sign_service_1.JwtSignService,customer_strategy_1.CustomerStrategy,member_strategy_1.MemberStrategy],controllers:[auth_controller_1.AuthController]})],AuthModule),exports.AuthModule=AuthModule},6841:(__unused_webpack_module,exports,__webpack_require__)=>{var _a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.AuthService=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(6481),jwt_1=__webpack_require__(2064),bcrypt=__webpack_require__(7096),graphql_request_1=__webpack_require__(6408),environment_1=__webpack_require__(6567),auth_gql_1=__webpack_require__(4385);var Roles;!function(Roles){Roles.CUSTOMER="customer",Roles.MEMBER="member",Roles.ADMIN="admin"}(Roles||(Roles={}));let AuthService=class AuthService{constructor(jwtService){this.jwtService=jwtService,this.allowedRoles=Object.values(Roles),this.defaultRole=Roles.CUSTOMER}validateCustomer(username,pass){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const data=yield graphql_request_1.default.request(auth_gql_1.getCustomerByEmailQuery,{email:username}),user=null==data?void 0:data.customer[0];if(!user||!user.encryptedPassword)return null;return(yield bcrypt.compare(pass,user.encryptedPassword))?user:null}))}validateMember(username,pass){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const data=yield graphql_request_1.default.request(auth_gql_1.getMemberByEmailQuery,{email:username}),user=null==data?void 0:data.member[0];if(!user||!user.encryptedPassword)return null;return(yield bcrypt.compare(pass,user.encryptedPassword))?user:null}))}encryptPassword(password){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return bcrypt.hash(password,environment_1.environment.bcrypt.saltRounds)}))}};AuthService=tslib_1.__decorate([(0,common_1.Injectable)(),tslib_1.__metadata("design:paramtypes",["function"==typeof(_a=void 0!==jwt_1.JwtService&&jwt_1.JwtService)?_a:Object])],AuthService),exports.AuthService=AuthService},1864:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.CustomerAuthGuard=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(6481),passport_1=__webpack_require__(4340);let CustomerAuthGuard=class CustomerAuthGuard extends((0,passport_1.AuthGuard)("customer")){};CustomerAuthGuard=tslib_1.__decorate([(0,common_1.Injectable)()],CustomerAuthGuard),exports.CustomerAuthGuard=CustomerAuthGuard},3817:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.MemberAuthGuard=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(6481),passport_1=__webpack_require__(4340);let MemberAuthGuard=class MemberAuthGuard extends((0,passport_1.AuthGuard)("member")){};MemberAuthGuard=tslib_1.__decorate([(0,common_1.Injectable)()],MemberAuthGuard),exports.MemberAuthGuard=MemberAuthGuard},5207:(__unused_webpack_module,exports,__webpack_require__)=>{var _a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.JwtSignService=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(6481),jwt_1=__webpack_require__(2064);var Roles;!function(Roles){Roles.CUSTOMER="customer",Roles.MEMBER="member",Roles.PUBLIC="public"}(Roles||(Roles={}));let JwtSignService=class JwtSignService{constructor(jwtService){this.jwtService=jwtService}getPayload(id,appId,role){return{sub:id,"https://hasura.io/jwt/claims":{"x-hasura-allowed-roles":[role],"x-hasura-default-role":role,"x-hasura-user-id":id,"x-hasura-app-id":appId}}}signCustomerToken(customer){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const payload=this.getPayload(customer.id,customer.appId,Roles.CUSTOMER);return`Bearer ${this.jwtService.sign(payload)}`}))}signMemberToken(member){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const payload=this.getPayload(member.id,member.appId,Roles.MEMBER);return`Bearer ${this.jwtService.sign(payload)}`}))}};JwtSignService=tslib_1.__decorate([(0,common_1.Injectable)(),tslib_1.__metadata("design:paramtypes",["function"==typeof(_a=void 0!==jwt_1.JwtService&&jwt_1.JwtService)?_a:Object])],JwtSignService),exports.JwtSignService=JwtSignService},2392:(__unused_webpack_module,exports,__webpack_require__)=>{var _a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.CustomerStrategy=void 0;const tslib_1=__webpack_require__(752),passport_local_1=__webpack_require__(7055),passport_1=__webpack_require__(4340),common_1=__webpack_require__(6481),auth_service_1=__webpack_require__(6841);let CustomerStrategy=class CustomerStrategy extends((0,passport_1.PassportStrategy)(passport_local_1.Strategy,"customer")){constructor(authService){super({usernameField:"email"}),this.authService=authService}validate(username,password){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const user=yield this.authService.validateCustomer(username,password);if(!user)throw new common_1.UnauthorizedException;return user}))}};CustomerStrategy=tslib_1.__decorate([(0,common_1.Injectable)(),tslib_1.__metadata("design:paramtypes",["function"==typeof(_a=void 0!==auth_service_1.AuthService&&auth_service_1.AuthService)?_a:Object])],CustomerStrategy),exports.CustomerStrategy=CustomerStrategy},1259:(__unused_webpack_module,exports,__webpack_require__)=>{var _a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.MemberStrategy=void 0;const tslib_1=__webpack_require__(752),passport_local_1=__webpack_require__(7055),passport_1=__webpack_require__(4340),common_1=__webpack_require__(6481),auth_service_1=__webpack_require__(6841);let MemberStrategy=class MemberStrategy extends((0,passport_1.PassportStrategy)(passport_local_1.Strategy,"member")){constructor(authService){super({usernameField:"email"}),this.authService=authService}validate(username,password){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const user=yield this.authService.validateMember(username,password);if(!user)throw new common_1.UnauthorizedException;return user}))}};MemberStrategy=tslib_1.__decorate([(0,common_1.Injectable)(),tslib_1.__metadata("design:paramtypes",["function"==typeof(_a=void 0!==auth_service_1.AuthService&&auth_service_1.AuthService)?_a:Object])],MemberStrategy),exports.MemberStrategy=MemberStrategy},985:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMemberAndChannelQuery=void 0;const gql_1=__webpack_require__(609);exports.getMemberAndChannelQuery=(0,gql_1.gql)("\n  query HasuraActionsGetMemberAndChannel($memberId: uuid!, $channelId: uuid!) {\n    member: member_by_pk(id: $memberId) {\n      id\n      channels(where: { channelId: { _eq: $channelId } }) {\n        id\n      }\n    }\n  }\n")},2107:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.HasuraActionsGuard=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(6481),graphql_1=__webpack_require__(1161),environment_1=__webpack_require__(6567);let HasuraActionsGuard=class HasuraActionsGuard{canActivate(context){if(!environment_1.environment.production)return!0;const ctx=graphql_1.GqlExecutionContext.create(context),{req:{headers}}=ctx.getArgByIndex(2);return headers.hasura_manager_graphql_secret_header_value===environment_1.environment.hasura.actionSecretFactory}};HasuraActionsGuard=tslib_1.__decorate([(0,common_1.Injectable)()],HasuraActionsGuard),exports.HasuraActionsGuard=HasuraActionsGuard},6897:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.HasuraActionsModule=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(6481),hasura_actions_resolver_1=__webpack_require__(9167),hasura_actions_service_1=__webpack_require__(2739);let HasuraActionsModule=class HasuraActionsModule{};HasuraActionsModule=tslib_1.__decorate([(0,common_1.Module)({providers:[hasura_actions_resolver_1.HasuraActionsResolver,hasura_actions_service_1.HasuraActionsService]})],HasuraActionsModule),exports.HasuraActionsModule=HasuraActionsModule},9167:(__unused_webpack_module,exports,__webpack_require__)=>{var _a,_b,_c,_d;Object.defineProperty(exports,"__esModule",{value:!0}),exports.HasuraActionsResolver=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(6481),graphql_1=__webpack_require__(1161),hasura_actions_guard_1=__webpack_require__(2107),hasura_actions_schema_1=__webpack_require__(6264),hasura_actions_service_1=__webpack_require__(2739),graphql_2=__webpack_require__(805);let HasuraActionsResolver=class HasuraActionsResolver{constructor(hasuraActionService){this.hasuraActionService=hasuraActionService}get_link_preview(url){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return this.hasuraActionService.getLinkPreview(url)}))}get_agora_rtc_token(channelId,member){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return this.hasuraActionService.getAgoraRtcToken(member.id,channelId)}))}};tslib_1.__decorate([(0,graphql_1.Query)((()=>hasura_actions_schema_1.LinkPreviewResponse)),tslib_1.__param(0,(0,graphql_1.Args)("url")),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[String]),tslib_1.__metadata("design:returntype","function"==typeof(_b="undefined"!=typeof Promise&&Promise)?_b:Object)],HasuraActionsResolver.prototype,"get_link_preview",null),tslib_1.__decorate([(0,graphql_1.Mutation)((()=>hasura_actions_schema_1.GetAgoraRtcTokenResponse)),tslib_1.__param(0,(0,graphql_1.Args)("channelId",{type:()=>graphql_2.UUIDScalar})),tslib_1.__param(1,(0,graphql_2.HasuraUser)()),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[String,"function"==typeof(_c=void 0!==graphql_2.HasuraUser&&graphql_2.HasuraUser)?_c:Object]),tslib_1.__metadata("design:returntype","function"==typeof(_d="undefined"!=typeof Promise&&Promise)?_d:Object)],HasuraActionsResolver.prototype,"get_agora_rtc_token",null),HasuraActionsResolver=tslib_1.__decorate([(0,graphql_1.Resolver)("hasura-actions"),(0,common_1.UseGuards)(hasura_actions_guard_1.HasuraActionsGuard),tslib_1.__metadata("design:paramtypes",["function"==typeof(_a=void 0!==hasura_actions_service_1.HasuraActionsService&&hasura_actions_service_1.HasuraActionsService)?_a:Object])],HasuraActionsResolver),exports.HasuraActionsResolver=HasuraActionsResolver},6264:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetAgoraRtcTokenResponse=exports.LinkPreviewResponse=void 0;const tslib_1=__webpack_require__(752),graphql_1=__webpack_require__(1161);let LinkPreviewVideo=class LinkPreviewVideo{};tslib_1.__decorate([(0,graphql_1.Field)((()=>String),{nullable:!0}),tslib_1.__metadata("design:type",String)],LinkPreviewVideo.prototype,"url",void 0),tslib_1.__decorate([(0,graphql_1.Field)((()=>String),{nullable:!0}),tslib_1.__metadata("design:type",Object)],LinkPreviewVideo.prototype,"secureUrl",void 0),tslib_1.__decorate([(0,graphql_1.Field)((()=>String),{nullable:!0}),tslib_1.__metadata("design:type",Object)],LinkPreviewVideo.prototype,"type",void 0),tslib_1.__decorate([(0,graphql_1.Field)((()=>String),{nullable:!0}),tslib_1.__metadata("design:type",String)],LinkPreviewVideo.prototype,"width",void 0),tslib_1.__decorate([(0,graphql_1.Field)((()=>String),{nullable:!0}),tslib_1.__metadata("design:type",String)],LinkPreviewVideo.prototype,"height",void 0),LinkPreviewVideo=tslib_1.__decorate([(0,graphql_1.ObjectType)()],LinkPreviewVideo);let LinkPreviewResponse=class LinkPreviewResponse{};tslib_1.__decorate([(0,graphql_1.Field)(),tslib_1.__metadata("design:type",String)],LinkPreviewResponse.prototype,"url",void 0),tslib_1.__decorate([(0,graphql_1.Field)({nullable:!0}),tslib_1.__metadata("design:type",String)],LinkPreviewResponse.prototype,"title",void 0),tslib_1.__decorate([(0,graphql_1.Field)({nullable:!0}),tslib_1.__metadata("design:type",String)],LinkPreviewResponse.prototype,"siteName",void 0),tslib_1.__decorate([(0,graphql_1.Field)({nullable:!0}),tslib_1.__metadata("design:type",String)],LinkPreviewResponse.prototype,"description",void 0),tslib_1.__decorate([(0,graphql_1.Field)(),tslib_1.__metadata("design:type",String)],LinkPreviewResponse.prototype,"mediaType",void 0),tslib_1.__decorate([(0,graphql_1.Field)({nullable:!0}),tslib_1.__metadata("design:type",String)],LinkPreviewResponse.prototype,"contentType",void 0),tslib_1.__decorate([(0,graphql_1.Field)((()=>[String]),{nullable:!0}),tslib_1.__metadata("design:type",Array)],LinkPreviewResponse.prototype,"images",void 0),tslib_1.__decorate([(0,graphql_1.Field)((()=>[String])),tslib_1.__metadata("design:type",Array)],LinkPreviewResponse.prototype,"favicons",void 0),tslib_1.__decorate([(0,graphql_1.Field)((()=>[LinkPreviewVideo]),{nullable:!0}),tslib_1.__metadata("design:type",Array)],LinkPreviewResponse.prototype,"videos",void 0),LinkPreviewResponse=tslib_1.__decorate([(0,graphql_1.ObjectType)()],LinkPreviewResponse),exports.LinkPreviewResponse=LinkPreviewResponse;let GetAgoraRtcTokenResponse=class GetAgoraRtcTokenResponse{};tslib_1.__decorate([(0,graphql_1.Field)(),tslib_1.__metadata("design:type",String)],GetAgoraRtcTokenResponse.prototype,"token",void 0),GetAgoraRtcTokenResponse=tslib_1.__decorate([(0,graphql_1.ObjectType)()],GetAgoraRtcTokenResponse),exports.GetAgoraRtcTokenResponse=GetAgoraRtcTokenResponse},2739:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.HasuraActionsService=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(6481),link_preview_js_1=__webpack_require__(707),agora_access_token_1=__webpack_require__(7618),dns=__webpack_require__(9523),environment_1=__webpack_require__(6567),hash_1=__webpack_require__(6948),graphql_request_1=__webpack_require__(6408),hasura_actions_gql_1=__webpack_require__(985);let HasuraActionsService=class HasuraActionsService{getLinkPreview(url){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const urlInstance=new URL(url);urlInstance.searchParams.append("_escaped_fragment_","");const response=yield(0,link_preview_js_1.getLinkPreview)(urlInstance.href,{followRedirects:"manual",handleRedirects:(baseURL,forwardedURL)=>{const urlObj=new URL(baseURL),forwardedURLObj=new URL(forwardedURL);return forwardedURLObj.hostname===urlObj.hostname||forwardedURLObj.hostname==="www."+urlObj.hostname},resolveDNSHost:url=>tslib_1.__awaiter(this,void 0,void 0,(function*(){return new Promise(((resolve,reject)=>{const hostname=new URL(url).hostname;dns.lookup(hostname,((err,address)=>{err&&reject(err),resolve(address)}))}))}))});return response}))}getAgoraRtcToken(memberId,channelId){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const{member}=yield graphql_request_1.default.request(hasura_actions_gql_1.getMemberAndChannelQuery,{memberId,channelId});if(!member)throw Error("Member doesn't exists");if(0===member.channels.length)throw Error("Member isn't part of the channel");const appId=environment_1.environment.agora.appId,appCertificate=environment_1.environment.agora.appCertificate,role=((0,hash_1.hashString)(memberId),agora_access_token_1.RtcRole.PUBLISHER),privilegeExpiredTs=Math.floor(Date.now()/1e3)+3600;return{token:agora_access_token_1.RtcTokenBuilder.buildTokenWithAccount(appId,appCertificate,channelId,memberId,role,privilegeExpiredTs)}}))}};HasuraActionsService=tslib_1.__decorate([(0,common_1.Injectable)()],HasuraActionsService),exports.HasuraActionsService=HasuraActionsService},6533:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDefaultChannelMutation=void 0;const gql_1=__webpack_require__(609);exports.createDefaultChannelMutation=(0,gql_1.gql)("\n  mutation HasuraEventsCreateDefaultChannelMutation(\n    $appId: uuid!\n    $name: String!\n  ) {\n    insert_channel_one(object: { appId: $appId, name: $name }) {\n      id\n    }\n  }\n")},6509:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.HasuraEventsModule=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(6481),hasura_events_service_1=__webpack_require__(6779);let HasuraEventsModule=class HasuraEventsModule{};HasuraEventsModule=tslib_1.__decorate([(0,common_1.Module)({providers:[hasura_events_service_1.HasuraEventsService]})],HasuraEventsModule),exports.HasuraEventsModule=HasuraEventsModule},6779:(__unused_webpack_module,exports,__webpack_require__)=>{var _a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.HasuraEventsService=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(6481),nestjs_hasura_1=__webpack_require__(1330),graphql_request_1=__webpack_require__(6408),hasura_events_gql_1=__webpack_require__(6533);let HasuraEventsService=class HasuraEventsService{handleUserCreated(event){return graphql_request_1.default.request(hasura_events_gql_1.createDefaultChannelMutation,{appId:event.event.data.new.id,name:"Default"})}};tslib_1.__decorate([(0,nestjs_hasura_1.TrackedHasuraEventHandler)({triggerName:"app-created",tableName:"app",definition:{type:"insert"}}),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",["function"==typeof(_a=void 0!==nestjs_hasura_1.HasuraInsertEvent&&nestjs_hasura_1.HasuraInsertEvent)?_a:Object]),tslib_1.__metadata("design:returntype",void 0)],HasuraEventsService.prototype,"handleUserCreated",null),HasuraEventsService=tslib_1.__decorate([(0,common_1.Injectable)()],HasuraEventsService),exports.HasuraEventsService=HasuraEventsService},4657:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.JwtModule=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(6481),jwt_1=__webpack_require__(2064),environment_1=__webpack_require__(6567);let JwtModule=class JwtModule{};JwtModule=tslib_1.__decorate([(0,common_1.Global)(),(0,common_1.Module)({imports:[jwt_1.JwtModule.register({privateKey:environment_1.environment.jwtConstants.privateKey,signOptions:{expiresIn:environment_1.environment.jwtConstants.expiresIn,algorithm:"RS256"}})],exports:[jwt_1.JwtModule]})],JwtModule),exports.JwtModule=JwtModule},6408:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});const graphql_request_1=__webpack_require__(5805),environment_1=__webpack_require__(6567),hasura=new graphql_request_1.GraphQLClient(environment_1.environment.hasura.endpoint,{headers:{"x-hasura-admin-secret":environment_1.environment.hasura.secret}});exports.default=hasura},1306:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.CONSTANTS=void 0,exports.CONSTANTS={HASURA_MANAGER_WEBHOOK_SECRET_HEADER_VALUE:"HASURA_MANAGER_WEBHOOK_SECRET_HEADER_VALUE"}},6567:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.environment=void 0;const jwt_token_key_1=__webpack_require__(4342);exports.environment={port:parseInt(process.env.PORT||"3333"),production:!0,hasura:{endpoint:"https://embedded-chat-app-12.hasura.app/v1/graphql",secret:"Oeh1m5lyFvFTMBBelE1zpFBkhfqfxjpcmeWKzXUPPRHQ9qgn2DEDpYxhyLMJfMeJ",webhookSecretFactory:"jIZPMFvBdMkixLh",actionSecretFactory:"hLxikMdBvFMPZIj"},jwtConstants:{privateKey:jwt_token_key_1.JWT_TOKEN_PRIVATE_KEY,expiresIn:"90 day"},bcrypt:{saltRounds:10},agora:{appId:"8c6d7ddd9f9445bba88713c13a115467",appCertificate:"65f5053e-47e9-4b8d-9916-f7dedfb47dcc"}}},4342:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.JWT_TOKEN_PRIVATE_KEY=void 0,exports.JWT_TOKEN_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\nMIIEpQIBAAKCAQEAyyCeIzIABTM1tuO8WNRkY9Zl32CYnueiu4JQlGnKTl1WSKnU\nwN1yixAlObuCpKLFXPeiKPs0Gkf6aCUNmkfN1OGuWkksQLRaZ8Kzu4Lp7H0jioiv\nSot3unvpTERRlHAiBQWmpP9N/tcWkuB6JII5kZLiDFFi5E7/wajHey4y7Jjx5EDc\nle8qEjDUwkamOgB5KI52hyllJYvpHWL3riC7/DLT4EVcT+PqlwdNckCKf9rF0y1f\nE1Pg93LlWvZQwKVXpbfyqZ+3ITw4D8iag04cn//wdorFO5b3wnzIglplwzTmCRZJ\n7jmbBAc8swuPIgjSo/1hJjZZzEtoVICcjFQFnwIDAQABAoIBAQCFggvOcDepM05z\nxd1uuTK+mBVfK3tEvlSsT+uskJfix+BFZDKtDSATHOqKtp8YnM+B2lVgADPvri18\ntBXruJQl/qt9Nij64k+lcUh2z4X25Q0uKcalBWQNUxI1CZZhLQ5/JIayXgeinzZ8\nFUTSqDE0aElg9UE9dFsPq2JpqSTZckOSHORse/hpZwFcsc3KDP6PDPjLKn57Gfv4\nMTH6bwZVTejrtTncRAHe1WCAI5+yWFyJ+MNEtzKpOkLH6t9SmiV+VW3sY82maAMU\nryiJp/OpBs5yMJN4e43G+CTHT/uXpKmI8XocpsClrJY8E5pLeZe8Dxa+N/IQp/wg\nBKtyvp+ZAoGBAP/cOscDmlCBVvaV63l7Cg+MLe5mSy/YtjYFR/571UWdt/ReArOm\n0RbS6kkOWFNSV4I6e25KLnev4rFgIwuss8vsa9B9F1gpbjpdUkTzybR00L28meyP\nBHylS4uLdW51ratquRYylKtDrMae+0JnoS7w+4oo8h/D0SeQarPLJ0zlAoGBAMs9\nBA3xwHr9np3IBHY1sg6cB3seOkBeXsJroQgLajObpq2yIyalUXqSmAIRwrEPPPaq\nrVtj/1NSuBBCtBW4ZJSO8nlZR7QgMK9/006ewidxOKaeA5G5ijlwfdo5AdIJJq6Q\nuXsJraQ0sEfNIKWkim9oZG/4K0402T5Djg12eaQzAoGBAJCwNNj4U5q1Gb2GWEwx\nZSYXqp3HYTtkfN4drHHgC2I755wcUcDQVCtpCK5Zm187EFuHwOdEsfRjFXojGI5w\nkph+URXst3fWrgv5XB28E1OmP6kcb5sT4YCvZQI70iOuDpECYDqKTgJv2dPUcdhC\njCbkhgrCTvHhpXSPOZgFCWt1AoGBAL6pAem29nQrAydPoefnXZ/Y/ieg5tLF9S18\n3Ld4ReweRBJEwDcb9cEATvv5/2QtQGrDGRhYSgm32xbeDKUns6uuIoh2mg6/+Axb\n5TanNsrbq2KbcAvAPIzAHEChJDUPAqvW9zoWjUAzcYAaTls2bewvybFE5hNa/sYr\nh9LXZywDAoGATfWfoUYPHBnMFpkDZz1GoHSss1SPl1m4F5jCJ7cPuf7tPJRXJaMf\n/jYQi67jmzNOO6nVxPdsDxkto71qNsCkhdDkuWflawj9JQJWJyVXwgsVjZiYr634\nSXeedSKqfBGQqzXsmKd2xdgYcE9Fzp9UpGC/HeD4i+l3Js5YJgJbASM=\n-----END RSA PRIVATE KEY-----"},4816:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.useFragment=void 0,exports.useFragment=function(_documentNode,fragmentType){return fragmentType}},6569:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.gql=void 0;const types=__webpack_require__(4579),documents={"\n  fragment AppAuthMember on member {\n    id\n    appId\n  }\n":types.AppAuthMemberFragmentDoc,"\n  query AppAuthServiceGetAppById($appId: uuid!, $externalMemberId: String!) {\n    app: app_by_pk(id: $appId) {\n      id\n      jwtSecrets\n    }\n\n    member(\n      where: { appId: { _eq: $appId }, externalId: { _eq: $externalMemberId } }\n    ) {\n      ...AppAuthMember\n    }\n  }\n":types.AppAuthServiceGetAppByIdDocument,"\n  mutation CreateMember($data: member_insert_input!) {\n    member: insert_member_one(\n      object: $data\n      on_conflict: {\n        constraint: member_app_id_external_id_key\n        update_columns: [name]\n      }\n    ) {\n      ...AppAuthMember\n    }\n  }\n":types.CreateMemberDocument,"\n  query AuthServiceGetCustomerByEmail($email: String!) {\n    customer(where: { email: { _eq: $email } }) {\n      id\n      encryptedPassword\n      appId\n    }\n  }\n":types.AuthServiceGetCustomerByEmailDocument,"\n  query AuthServiceGetMemberByEmail($email: String!) {\n    member(where: { externalId: { _eq: $email } }) {\n      id\n      appId\n      encryptedPassword\n    }\n  }\n":types.AuthServiceGetMemberByEmailDocument,"\n  query HasuraActionsGetMemberAndChannel($memberId: uuid!, $channelId: uuid!) {\n    member: member_by_pk(id: $memberId) {\n      id\n      channels(where: { channelId: { _eq: $channelId } }) {\n        id\n      }\n    }\n  }\n":types.HasuraActionsGetMemberAndChannelDocument,"\n  mutation HasuraEventsCreateDefaultChannelMutation(\n    $appId: uuid!\n    $name: String!\n  ) {\n    insert_channel_one(object: { appId: $appId, name: $name }) {\n      id\n    }\n  }\n":types.HasuraEventsCreateDefaultChannelMutationDocument};exports.gql=function(source){var _a;return null!==(_a=documents[source])&&void 0!==_a?_a:{}}},4579:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.CreateMemberDocument=exports.AppAuthServiceGetAppByIdDocument=exports.AppAuthMemberFragmentDoc=exports.Reaction_Update_Column=exports.Reaction_Select_Column=exports.Reaction_Constraint=exports.Order_By=exports.Message_Update_Column=exports.Message_Select_Column=exports.Message_Reaction_Update_Column=exports.Message_Reaction_Select_Column=exports.Message_Reaction_Constraint=exports.Message_File_Update_Column=exports.Message_File_Select_Column=exports.Message_File_Constraint=exports.Message_Constraint=exports.Member_Update_Column=exports.Member_Select_Column=exports.Member_File_Update_Column=exports.Member_File_Select_Column=exports.Member_File_Constraint=exports.Member_Constraint=exports.Member_Channel_Update_Column=exports.Member_Channel_Select_Column=exports.Member_Channel_Constraint=exports.File_Update_Column=exports.File_Type_Update_Column=exports.File_Type_Select_Column=exports.File_Type_Enum=exports.File_Type_Constraint=exports.File_Service_Update_Column=exports.File_Service_Select_Column=exports.File_Service_Enum=exports.File_Service_Constraint=exports.File_Select_Column=exports.File_Constraint=exports.Customer_Update_Column=exports.Customer_Select_Column=exports.Customer_Role_Update_Column=exports.Customer_Role_Select_Column=exports.Customer_Role_Enum=exports.Customer_Role_Constraint=exports.Customer_Constraint=exports.Cursor_Ordering=exports.Channel_Update_Column=exports.Channel_Select_Column=exports.Channel_Constraint=exports.App_Update_Column=exports.App_Select_Column=exports.App_Constraint=void 0,exports.HasuraEventsCreateDefaultChannelMutationDocument=exports.HasuraActionsGetMemberAndChannelDocument=exports.AuthServiceGetMemberByEmailDocument=exports.AuthServiceGetCustomerByEmailDocument=void 0,function(App_Constraint){App_Constraint.AppPkey="app_pkey"}(exports.App_Constraint||(exports.App_Constraint={})),function(App_Select_Column){App_Select_Column.Id="id",App_Select_Column.JwtSecrets="jwtSecrets",App_Select_Column.Name="name"}(exports.App_Select_Column||(exports.App_Select_Column={})),function(App_Update_Column){App_Update_Column.Id="id",App_Update_Column.JwtSecrets="jwtSecrets",App_Update_Column.Name="name"}(exports.App_Update_Column||(exports.App_Update_Column={})),function(Channel_Constraint){Channel_Constraint.ChannelPkey="channel_pkey"}(exports.Channel_Constraint||(exports.Channel_Constraint={})),function(Channel_Select_Column){Channel_Select_Column.AppId="appId",Channel_Select_Column.CreatedAt="createdAt",Channel_Select_Column.DeletedAt="deletedAt",Channel_Select_Column.Id="id",Channel_Select_Column.Name="name",Channel_Select_Column.UpdatedAt="updatedAt"}(exports.Channel_Select_Column||(exports.Channel_Select_Column={})),function(Channel_Update_Column){Channel_Update_Column.AppId="appId",Channel_Update_Column.CreatedAt="createdAt",Channel_Update_Column.DeletedAt="deletedAt",Channel_Update_Column.Id="id",Channel_Update_Column.Name="name",Channel_Update_Column.UpdatedAt="updatedAt"}(exports.Channel_Update_Column||(exports.Channel_Update_Column={})),function(Cursor_Ordering){Cursor_Ordering.Asc="ASC",Cursor_Ordering.Desc="DESC"}(exports.Cursor_Ordering||(exports.Cursor_Ordering={})),function(Customer_Constraint){Customer_Constraint.CustomerEmailKey="customer_email_key",Customer_Constraint.CustomerPkey="customer_pkey"}(exports.Customer_Constraint||(exports.Customer_Constraint={})),function(Customer_Role_Constraint){Customer_Role_Constraint.CustomerRolePkey="customer_role_pkey"}(exports.Customer_Role_Constraint||(exports.Customer_Role_Constraint={})),function(Customer_Role_Enum){Customer_Role_Enum.Admin="admin",Customer_Role_Enum.Owner="owner"}(exports.Customer_Role_Enum||(exports.Customer_Role_Enum={})),function(Customer_Role_Select_Column){Customer_Role_Select_Column.Value="value"}(exports.Customer_Role_Select_Column||(exports.Customer_Role_Select_Column={})),function(Customer_Role_Update_Column){Customer_Role_Update_Column.Value="value"}(exports.Customer_Role_Update_Column||(exports.Customer_Role_Update_Column={})),function(Customer_Select_Column){Customer_Select_Column.AppId="appId",Customer_Select_Column.CreatedAt="createdAt",Customer_Select_Column.Email="email",Customer_Select_Column.EncryptedPassword="encryptedPassword",Customer_Select_Column.FirstName="firstName",Customer_Select_Column.Id="id",Customer_Select_Column.LastName="lastName",Customer_Select_Column.Role="role",Customer_Select_Column.UpdatedAt="updatedAt"}(exports.Customer_Select_Column||(exports.Customer_Select_Column={})),function(Customer_Update_Column){Customer_Update_Column.AppId="appId",Customer_Update_Column.CreatedAt="createdAt",Customer_Update_Column.Email="email",Customer_Update_Column.EncryptedPassword="encryptedPassword",Customer_Update_Column.FirstName="firstName",Customer_Update_Column.Id="id",Customer_Update_Column.LastName="lastName",Customer_Update_Column.Role="role",Customer_Update_Column.UpdatedAt="updatedAt"}(exports.Customer_Update_Column||(exports.Customer_Update_Column={})),function(File_Constraint){File_Constraint.FilePkey="file_pkey"}(exports.File_Constraint||(exports.File_Constraint={})),function(File_Select_Column){File_Select_Column.CreatedAt="createdAt",File_Select_Column.DeletedAt="deletedAt",File_Select_Column.Id="id",File_Select_Column.Name="name",File_Select_Column.Path="path",File_Select_Column.Service="service",File_Select_Column.Type="type",File_Select_Column.UpdatedAt="updatedAt"}(exports.File_Select_Column||(exports.File_Select_Column={})),function(File_Service_Constraint){File_Service_Constraint.FileServicePkey="file_service_pkey"}(exports.File_Service_Constraint||(exports.File_Service_Constraint={})),function(File_Service_Enum){File_Service_Enum.Cloudinary="cloudinary",File_Service_Enum.Url="url"}(exports.File_Service_Enum||(exports.File_Service_Enum={})),function(File_Service_Select_Column){File_Service_Select_Column.Value="value"}(exports.File_Service_Select_Column||(exports.File_Service_Select_Column={})),function(File_Service_Update_Column){File_Service_Update_Column.Value="value"}(exports.File_Service_Update_Column||(exports.File_Service_Update_Column={})),function(File_Type_Constraint){File_Type_Constraint.FileTypePkey="file_type_pkey"}(exports.File_Type_Constraint||(exports.File_Type_Constraint={})),function(File_Type_Enum){File_Type_Enum.Jpg="jpg",File_Type_Enum.Mp4="mp4",File_Type_Enum.Png="png"}(exports.File_Type_Enum||(exports.File_Type_Enum={})),function(File_Type_Select_Column){File_Type_Select_Column.Value="value"}(exports.File_Type_Select_Column||(exports.File_Type_Select_Column={})),function(File_Type_Update_Column){File_Type_Update_Column.Value="value"}(exports.File_Type_Update_Column||(exports.File_Type_Update_Column={})),function(File_Update_Column){File_Update_Column.CreatedAt="createdAt",File_Update_Column.DeletedAt="deletedAt",File_Update_Column.Id="id",File_Update_Column.Name="name",File_Update_Column.Path="path",File_Update_Column.Service="service",File_Update_Column.Type="type",File_Update_Column.UpdatedAt="updatedAt"}(exports.File_Update_Column||(exports.File_Update_Column={})),function(Member_Channel_Constraint){Member_Channel_Constraint.MemberChannelIdKey="member_channel_id_key",Member_Channel_Constraint.MemberChannelPkey="member_channel_pkey"}(exports.Member_Channel_Constraint||(exports.Member_Channel_Constraint={})),function(Member_Channel_Select_Column){Member_Channel_Select_Column.ChannelId="channelId",Member_Channel_Select_Column.Id="id",Member_Channel_Select_Column.LastSeenAt="lastSeenAt",Member_Channel_Select_Column.MemberId="memberId"}(exports.Member_Channel_Select_Column||(exports.Member_Channel_Select_Column={})),function(Member_Channel_Update_Column){Member_Channel_Update_Column.ChannelId="channelId",Member_Channel_Update_Column.Id="id",Member_Channel_Update_Column.LastSeenAt="lastSeenAt",Member_Channel_Update_Column.MemberId="memberId"}(exports.Member_Channel_Update_Column||(exports.Member_Channel_Update_Column={})),function(Member_Constraint){Member_Constraint.MemberAppIdExternalIdKey="member_app_id_external_id_key",Member_Constraint.MemberPkey="member_pkey"}(exports.Member_Constraint||(exports.Member_Constraint={})),function(Member_File_Constraint){Member_File_Constraint.MemberFileIdKey="member_file_id_key",Member_File_Constraint.MemberFilePkey="member_file_pkey"}(exports.Member_File_Constraint||(exports.Member_File_Constraint={})),function(Member_File_Select_Column){Member_File_Select_Column.FileId="fileId",Member_File_Select_Column.Id="id",Member_File_Select_Column.MemberId="memberId"}(exports.Member_File_Select_Column||(exports.Member_File_Select_Column={})),function(Member_File_Update_Column){Member_File_Update_Column.FileId="fileId",Member_File_Update_Column.Id="id",Member_File_Update_Column.MemberId="memberId"}(exports.Member_File_Update_Column||(exports.Member_File_Update_Column={})),function(Member_Select_Column){Member_Select_Column.ActiveAt="activeAt",Member_Select_Column.AppId="appId",Member_Select_Column.AvatarFileId="avatarFileId",Member_Select_Column.CreatedAt="createdAt",Member_Select_Column.DeletedAt="deletedAt",Member_Select_Column.EncryptedPassword="encryptedPassword",Member_Select_Column.ExternalId="externalId",Member_Select_Column.Id="id",Member_Select_Column.Name="name",Member_Select_Column.UpdatedAt="updatedAt"}(exports.Member_Select_Column||(exports.Member_Select_Column={})),function(Member_Update_Column){Member_Update_Column.ActiveAt="activeAt",Member_Update_Column.AppId="appId",Member_Update_Column.AvatarFileId="avatarFileId",Member_Update_Column.CreatedAt="createdAt",Member_Update_Column.DeletedAt="deletedAt",Member_Update_Column.EncryptedPassword="encryptedPassword",Member_Update_Column.ExternalId="externalId",Member_Update_Column.Id="id",Member_Update_Column.Name="name",Member_Update_Column.UpdatedAt="updatedAt"}(exports.Member_Update_Column||(exports.Member_Update_Column={})),function(Message_Constraint){Message_Constraint.MessagePkey="message_pkey"}(exports.Message_Constraint||(exports.Message_Constraint={})),function(Message_File_Constraint){Message_File_Constraint.MessageFileIdKey="message_file_id_key",Message_File_Constraint.MessageFilePkey="message_file_pkey"}(exports.Message_File_Constraint||(exports.Message_File_Constraint={})),function(Message_File_Select_Column){Message_File_Select_Column.FileId="fileId",Message_File_Select_Column.Id="id",Message_File_Select_Column.MessageId="messageId"}(exports.Message_File_Select_Column||(exports.Message_File_Select_Column={})),function(Message_File_Update_Column){Message_File_Update_Column.FileId="fileId",Message_File_Update_Column.Id="id",Message_File_Update_Column.MessageId="messageId"}(exports.Message_File_Update_Column||(exports.Message_File_Update_Column={})),function(Message_Reaction_Constraint){Message_Reaction_Constraint.MessageReactionIdKey="message_reaction_id_key",Message_Reaction_Constraint.MessageReactionPkey="message_reaction_pkey"}(exports.Message_Reaction_Constraint||(exports.Message_Reaction_Constraint={})),function(Message_Reaction_Select_Column){Message_Reaction_Select_Column.Id="id",Message_Reaction_Select_Column.MemberId="member_id",Message_Reaction_Select_Column.MessageId="messageId",Message_Reaction_Select_Column.ReactionId="reactionId"}(exports.Message_Reaction_Select_Column||(exports.Message_Reaction_Select_Column={})),function(Message_Reaction_Update_Column){Message_Reaction_Update_Column.Id="id",Message_Reaction_Update_Column.MemberId="member_id",Message_Reaction_Update_Column.MessageId="messageId",Message_Reaction_Update_Column.ReactionId="reactionId"}(exports.Message_Reaction_Update_Column||(exports.Message_Reaction_Update_Column={})),function(Message_Select_Column){Message_Select_Column.Body="body",Message_Select_Column.ChannelId="channelId",Message_Select_Column.CreatedAt="createdAt",Message_Select_Column.DeletedAt="deletedAt",Message_Select_Column.Id="id",Message_Select_Column.ParentId="parentId",Message_Select_Column.ReplyToId="replyToId",Message_Select_Column.SenderId="senderId",Message_Select_Column.UpdatedAt="updatedAt"}(exports.Message_Select_Column||(exports.Message_Select_Column={})),function(Message_Update_Column){Message_Update_Column.Body="body",Message_Update_Column.ChannelId="channelId",Message_Update_Column.CreatedAt="createdAt",Message_Update_Column.DeletedAt="deletedAt",Message_Update_Column.Id="id",Message_Update_Column.ParentId="parentId",Message_Update_Column.ReplyToId="replyToId",Message_Update_Column.SenderId="senderId",Message_Update_Column.UpdatedAt="updatedAt"}(exports.Message_Update_Column||(exports.Message_Update_Column={})),function(Order_By){Order_By.Asc="asc",Order_By.AscNullsFirst="asc_nulls_first",Order_By.AscNullsLast="asc_nulls_last",Order_By.Desc="desc",Order_By.DescNullsFirst="desc_nulls_first",Order_By.DescNullsLast="desc_nulls_last"}(exports.Order_By||(exports.Order_By={})),function(Reaction_Constraint){Reaction_Constraint.ReactionPkey="reaction_pkey"}(exports.Reaction_Constraint||(exports.Reaction_Constraint={})),function(Reaction_Select_Column){Reaction_Select_Column.Id="id",Reaction_Select_Column.Name="name"}(exports.Reaction_Select_Column||(exports.Reaction_Select_Column={})),function(Reaction_Update_Column){Reaction_Update_Column.Id="id",Reaction_Update_Column.Name="name"}(exports.Reaction_Update_Column||(exports.Reaction_Update_Column={})),exports.AppAuthMemberFragmentDoc={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AppAuthMember"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"member"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"appId"}}]}}]},exports.AppAuthServiceGetAppByIdDocument={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AppAuthServiceGetAppById"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"appId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"uuid"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"externalMemberId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"app"},name:{kind:"Name",value:"app_by_pk"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"appId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"jwtSecrets"}}]}},{kind:"Field",name:{kind:"Name",value:"member"},arguments:[{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"appId"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_eq"},value:{kind:"Variable",name:{kind:"Name",value:"appId"}}}]}},{kind:"ObjectField",name:{kind:"Name",value:"externalId"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_eq"},value:{kind:"Variable",name:{kind:"Name",value:"externalMemberId"}}}]}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AppAuthMember"}}]}}]}},...exports.AppAuthMemberFragmentDoc.definitions]},exports.CreateMemberDocument={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"CreateMember"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"member_insert_input"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"member"},name:{kind:"Name",value:"insert_member_one"},arguments:[{kind:"Argument",name:{kind:"Name",value:"object"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}},{kind:"Argument",name:{kind:"Name",value:"on_conflict"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"constraint"},value:{kind:"EnumValue",value:"member_app_id_external_id_key"}},{kind:"ObjectField",name:{kind:"Name",value:"update_columns"},value:{kind:"ListValue",values:[{kind:"EnumValue",value:"name"}]}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AppAuthMember"}}]}}]}},...exports.AppAuthMemberFragmentDoc.definitions]},exports.AuthServiceGetCustomerByEmailDocument={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AuthServiceGetCustomerByEmail"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"email"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"customer"},arguments:[{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"email"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_eq"},value:{kind:"Variable",name:{kind:"Name",value:"email"}}}]}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"encryptedPassword"}},{kind:"Field",name:{kind:"Name",value:"appId"}}]}}]}}]},exports.AuthServiceGetMemberByEmailDocument={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AuthServiceGetMemberByEmail"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"email"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"member"},arguments:[{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"externalId"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_eq"},value:{kind:"Variable",name:{kind:"Name",value:"email"}}}]}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"appId"}},{kind:"Field",name:{kind:"Name",value:"encryptedPassword"}}]}}]}}]},exports.HasuraActionsGetMemberAndChannelDocument={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"HasuraActionsGetMemberAndChannel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"memberId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"uuid"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"uuid"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"member"},name:{kind:"Name",value:"member_by_pk"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"memberId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"channels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"channelId"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_eq"},value:{kind:"Variable",name:{kind:"Name",value:"channelId"}}}]}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]}}]},exports.HasuraEventsCreateDefaultChannelMutationDocument={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"HasuraEventsCreateDefaultChannelMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"appId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"uuid"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"insert_channel_one"},arguments:[{kind:"Argument",name:{kind:"Name",value:"object"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"appId"},value:{kind:"Variable",name:{kind:"Name",value:"appId"}}},{kind:"ObjectField",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]}},609:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__(752);tslib_1.__exportStar(__webpack_require__(6569),exports),tslib_1.__exportStar(__webpack_require__(4816),exports)},805:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.HasuraUser=exports.UUIDScalar=void 0;const tslib_1=__webpack_require__(752),graphql_1=__webpack_require__(7343),common_1=__webpack_require__(6481),graphql_2=__webpack_require__(1161),z=__webpack_require__(8316),jwt=__webpack_require__(9344),zod_1=__webpack_require__(1823);function validateUuid(uuid){try{return z.string().uuid().parse(uuid)}catch(error){throw new Error("Invalid UUID")}}exports.UUIDScalar=new graphql_1.GraphQLScalarType({name:"uuid",description:"A simple uuid parser",serialize:value=>validateUuid(value),parseValue:value=>validateUuid(value),parseLiteral:ast=>validateUuid(ast.value)}),exports.HasuraUser=(0,common_1.createParamDecorator)(((data,context)=>tslib_1.__awaiter(void 0,void 0,void 0,(function*(){var _a,_b;try{const arg=graphql_2.GqlExecutionContext.create(context).getArgByIndex(2),authorization=null===(_b=null===(_a=null==arg?void 0:arg.req)||void 0===_a?void 0:_a.headers)||void 0===_b?void 0:_b.authorization;if(!authorization)return;const{hasuraClaim}=zod_1.hasuraJwtTokenPayloadSchema.parse(jwt.decode(zod_1.jwtTokenSchema.bearer.parse(authorization)));return{id:hasuraClaim.userId,appId:hasuraClaim.appId}}catch(error){return}}))))},1823:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.hasuraJwtTokenPayloadSchema=exports.jwtTokenSchema=void 0;const z=__webpack_require__(8316),jwtRegex=/^([a-zA-Z0-9_=]+)\.([a-zA-Z0-9_=]+)\.([a-zA-Z0-9_\-+\/=]*)/g;exports.jwtTokenSchema={raw:z.string().regex(jwtRegex),bearer:z.string().regex(new RegExp(`^Bearer ${jwtRegex.source.substring(1)}`)).transform((token=>token.replace("Bearer ","")))};const claimKey="https://hasura.io/jwt/claims";exports.hasuraJwtTokenPayloadSchema=z.object({[claimKey]:z.object({"x-hasura-allowed-roles":z.string().array(),"x-hasura-default-role":z.string(),"x-hasura-user-id":z.string().uuid(),"x-hasura-app-id":z.string().uuid()})}).transform((payload=>({hasuraClaim:{userId:payload[claimKey]["x-hasura-user-id"],appId:payload[claimKey]["x-hasura-app-id"]}})))},6948:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.hashString=void 0;exports.hashString=(str,seed=0)=>{let h1=3735928559^seed,h2=1103547991^seed;for(let ch,i=0;i<str.length;i++)ch=str.charCodeAt(i),h1=Math.imul(h1^ch,2654435761),h2=Math.imul(h2^ch,1597334677);return h1=Math.imul(h1^h1>>>16,2246822507)^Math.imul(h2^h2>>>13,3266489909),h2=Math.imul(h2^h2>>>16,2246822507)^Math.imul(h1^h1>>>13,3266489909),4294967296*(2097151&h2)+(h1>>>0)}},3825:module=>{module.exports=require("@anatine/zod-nestjs")},1330:module=>{module.exports=require("@golevelup/nestjs-hasura")},9096:module=>{module.exports=require("@nestjs/apollo")},6481:module=>{module.exports=require("@nestjs/common")},143:module=>{module.exports=require("@nestjs/core")},1161:module=>{module.exports=require("@nestjs/graphql")},2064:module=>{module.exports=require("@nestjs/jwt")},4340:module=>{module.exports=require("@nestjs/passport")},7618:module=>{module.exports=require("agora-access-token")},7096:module=>{module.exports=require("bcrypt")},7343:module=>{module.exports=require("graphql")},5805:module=>{module.exports=require("graphql-request")},9344:module=>{module.exports=require("jsonwebtoken")},707:module=>{module.exports=require("link-preview-js")},7055:module=>{module.exports=require("passport-local")},752:module=>{module.exports=require("tslib")},8316:module=>{module.exports=require("zod")},9523:module=>{module.exports=require("dns")},1017:module=>{module.exports=require("path")}},__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__webpack_require__),module.exports}var __webpack_exports__={};(()=>{var exports=__webpack_exports__;Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__(752),common_1=__webpack_require__(6481),core_1=__webpack_require__(143),app_module_1=__webpack_require__(341),environment_1=__webpack_require__(6567),corsOrigins=["https://ychat-dashboard.vercel.app",...environment_1.environment.production?[]:["http://localhost:4201","http://127.0.0.1:4201","http://localhost:4200","http://127.0.0.1:4200"]];!function(){tslib_1.__awaiter(this,void 0,void 0,(function*(){const app=yield core_1.NestFactory.create(app_module_1.AppModule);app.setGlobalPrefix("api"),app.enableCors({origin:corsOrigins});const port=environment_1.environment.port;yield app.listen(port),common_1.Logger.log(`🚀 Application is running on: http://localhost:${port}/api`)}))}()})();var __webpack_export_target__=exports;for(var i in __webpack_exports__)__webpack_export_target__[i]=__webpack_exports__[i];__webpack_exports__.__esModule&&Object.defineProperty(__webpack_export_target__,"__esModule",{value:!0})})();
//# sourceMappingURL=main.js.map