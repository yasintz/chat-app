Project ChatApp {
  database_type: 'PostgreSQL'
  Note: '''
    # Chat App Database
    This is an embedded chat app
  '''
}

Table app {
  id int [pk, increment]
  title varchar
  description varchar
}

Enum customer_role_enum {
  owner
  admin
}

Table customer {
  id int [pk, increment]
  first_name varchar
  last_name varchar
  email varchar [unique]
  password varchar
  password_salt varchar
  app_id int [ref: > app.id]
  role customer_role_enum
}

Table member {
  id int [pk, increment]
  app_id int [ref: > app.id]
  first_name varchar
  last_name varchar
  email varchar
  password varchar
  password_salt varchar
}

Enum member_role_enum {
    moderator
}

Table member_role {
    id int
    member_id int [ref: > member.id]
    role member_role_enum
}

Table channel {
  id int [pk, increment]
  title varchar
  description varchar
  app_id int [ref: > app.id]
}

Table reaction {
  id int [pk]
}

Table file {
  id int [pk]
}

Table message_reaction {
  id int
  reaction_id int [ref: > reaction.id]
  message_id int [ref: > message.id]
}
Table message_file {
  id int
  file_id int [ref: > file.id]
  message_id int [ref: > message.id]
}

Table message {
  id int [pk, increment]
  created_at timestamptz
  updated_at timestamptz
  deleted_at timestamptz
  sender_id int [ref: > member.id]
  body varchar
  channel_id int [ref: > channel.id]
  pinned boolean
  reply_to int [ref: > message.id]
  parent_id int [ref: > message.id]
}

